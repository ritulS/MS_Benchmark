version: '3.3'
services:
  portainer:
    image: portainer/portainer-ce:latest
    container_name: portainer
    restart: always
    ports:
    - 8000:9000
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    - portainer_data:/data
    networks:
    - mewbie_network
    deploy:
      placement:
        constraints:
        - node.role == manager
  MewbieClient:
    image: mewbieregistry.com:5000/mewbie_img:latest
    container_name: mewbie_client
    volumes:
    - ./enrichment_runs/test_run/all_trace_packets.json:/app/all_trace_packets.json
    - ./deployment_files/mewbie_client/mewbie_client.py:/app/mewbie_client.py
    - ritul_logs:/app/logs/
    environment:
    - CONTAINER_NAME=mewbie_client
    - WORKLOAD_NAME=test_run
    command: sh -c "tail -f /dev/null"
    networks:
    - mewbie_network
    deploy:
      placement:
        constraints:
        - node.role == manager
  Redis-0_n8216:
    image: redis:latest
    container_name: n8216
    networks:
      mewbie_network:
        aliases:
        - n8216
  Python-0_n4408:
    image: mewbieregistry.com:5000/slp_img:latest
    container_name: n4408
    volumes:
    - ritul_logs:/app/logs/
    environment:
    - CONTAINER_NAME=n4408
    networks:
      mewbie_network:
        aliases:
        - n4408
  Python-1_n2134:
    image: mewbieregistry.com:5000/slp_img:latest
    container_name: n2134
    volumes:
    - ritul_logs:/app/logs/
    environment:
    - CONTAINER_NAME=n2134
    networks:
      mewbie_network:
        aliases:
        - n2134
  Python-2_n1725:
    image: mewbieregistry.com:5000/slp_img:latest
    container_name: n1725
    volumes:
    - ritul_logs:/app/logs/
    environment:
    - CONTAINER_NAME=n1725
    networks:
      mewbie_network:
        aliases:
        - n1725
networks:
  mewbie_network:
    driver: overlay
    ipam:
      config:
      - subnet: 10.20.0.0/16
volumes:
  ritul_logs: {}
  portainer_data:
    driver: local
